<!DOCTYPE html>
<html>
<head>
    <title>メモアプリ</title>
    {{ css|safe }}
</head>
<body>
    <textarea id="memo-text">{{ text }}</textarea>

    <script>
        const textarea = document.getElementById('memo-text');
        textarea.addEventListener('input', function() {
            // テキストが変更されたら自動で保存
            saveText();
        });

        // ページが開かれたら自動でフォーカス
        textarea.focus();

        function saveText() {
            const text = textarea.value;
            fetch('/update', {
                method: 'POST',
                body: new URLSearchParams({ text: text }),
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
            });
        }
    </script>
</body>
</html>
